(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-566515d2"],{7424:function(e,a){var t="https://10.23.20.53:9991/v1",n="http://127.0.0.1:8888";e.exports={LOGIN:"".concat(t,"/admin/user/login"),ROUTES:"".concat(t,"/routes"),NODES_MODULE:"".concat(t,"/node/module"),NODES_PIKA:"".concat(t,"/node/pika"),QUERY_DATA:"".concat(t,"/query/data"),All_API:"".concat(n,"/all"),HISTORY:"".concat(n,"/history"),REQUEST_API:"".concat(n,"/"),PID:"".concat(t,"/restart/pid"),RESTART:"".concat(t,"/restart/do"),LOG:"".concat(t,"/restart/log"),PLAYER_INFO:"".concat(t,"/admin/player/info"),MAIL_INFO:"".concat(t,"/admin/player/mail/info"),MAIL_SEND:"".concat(t,"/admin/player/mail/send"),MAIL_DEL:"".concat(t,"/admin/player/mail/delete"),MAIL_ENTIRE:"".concat(t,"/admin/player/mail/entire"),ANNOUNCEMENT_INFO:"".concat(t,"/announcement"),ANNOUNCEMENT_LIST:"".concat(t,"/announcement/list"),ANNOUNCEMENT_SAVE:"".concat(t,"/announcement/save"),ANNOUNCEMENT_DEL:"".concat(t,"/announcement/del"),BATTLE_LOG_FILES:"".concat(t,"/battle/log/files"),BATTLE_LOG_DEL:"".concat(t,"/battle/log/del"),BATTLE_LOG_DOWNLOAD:"".concat(t,"/battle/log/download"),BUILD_DO:"".concat(t,"/build/do"),BUILD_LOG:"".concat(t,"/build/log"),VERSION_INFO:"".concat(t,"/version/info"),VERSION_SAVE:"".concat(t,"/version/save"),VERSION_UPLOAD:"".concat(t,"/version/file"),VERSION_UPLOAD_ZIP:"".concat(t,"/version/zip"),BROADCAST_SEND:"".concat(t,"/broadcast/send"),WL_LIST:"".concat(t,"/whitelist/list"),WL_SAVE:"".concat(t,"/whitelist/save"),WL_DEL:"".concat(t,"/whitelist/del"),GITLAB_MEMBERS:"".concat(t,"/gitlab/members"),GITLAB_MODIFY:"".concat(t,"/gitlab/modify"),CDKEY_SAVE:"".concat(t,"/cdkey/save"),CDKEY_DEACTIVE:"".concat(t,"/cdkey/deactive"),BWL_LIST:"".concat(t,"/beta/whitelist/list"),BWL_SAVE:"".concat(t,"/beta/whitelist/save"),BWL_DEL:"".concat(t,"/beta/whitelist/del"),MAP_LINE_INFO:"".concat(t,"/map/line/info")}},c2f1:function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",[t("a-tabs",{attrs:{"default-active-key":"info"},on:{change:e.tabChange}},[t("a-tab-pane",{key:"info",attrs:{tab:"版本信息"}},[t("a-space",{attrs:{direction:"vertical",size:20}},[t("div",[e._v("当前版本："+e._s(e.form.version))]),t("div",[e._v("网关地址："+e._s(e.form.gateway))]),t("div",[e._v("热更文件地址："+e._s(e.form.cdn))]),t("div",[e._v("公告地址："+e._s(e.form.announcement))]),t("div",[e._v("版本文件名："+e._s(e.form.version_file))]),t("a-button",{attrs:{type:"primary"},on:{click:e.modify}},[e._v("修改")])],1)],1),t("a-tab-pane",{key:"version",attrs:{tab:"版本文件上传"}},[t("a-space",{staticStyle:{width:"100%"},attrs:{direction:"vertical"}},[t("a-upload-dragger",{attrs:{name:"file",multiple:!1,"default-file-list":e.defaultVersionFileList,"before-upload":e.beforeUpload}},[t("p",{staticClass:"ant-upload-drag-icon"},[t("a-icon",{attrs:{type:"inbox"}})],1),t("p",{staticClass:"ant-upload-text"},[e._v(" 单击或拖动文件到此区域上传 ")]),t("p",{staticClass:"ant-upload-hint"},[e._v(" 仅支持单个文件，且文件类型必须为.txt ")])]),t("a-row",{staticStyle:{"margin-top":"20px"},attrs:{type:"flex",justify:"end"}},[t("a-col",{attrs:{span:2}}),t("a-col",{attrs:{span:2}}),t("a-col",{attrs:{span:6}},[t("span",[e._v("平台：")]),t("a-radio-group",{staticStyle:{float:"right"},attrs:{value:e.os},on:{change:e.osChange}},[t("a-radio",{attrs:{value:"iOS"}},[e._v(" iOS ")]),t("a-radio",{attrs:{value:"Android"}},[e._v(" Android ")])],1)],1),t("a-col",{attrs:{span:4}},[t("a-button",{staticStyle:{float:"right","margin-top":"-5px"},attrs:{icon:"upload",type:"primary",disabled:e.uploadVersionFileBtn,loading:e.loading},on:{click:e.uploadFile}},[e._v("上传 ")])],1)],1)],1)],1),t("a-tab-pane",{key:"hot_update",attrs:{tab:"热更文件上传","force-render":""}},[t("a-space",{staticStyle:{width:"100%"},attrs:{direction:"vertical"}},[t("a-upload-dragger",{attrs:{name:"file",multiple:!1,"default-file-list":e.defaultVersionFileList,"before-upload":e.beforeUpload}},[t("p",{staticClass:"ant-upload-drag-icon"},[t("a-icon",{attrs:{type:"inbox"}})],1),t("p",{staticClass:"ant-upload-text"},[e._v(" 单击或拖动文件到此区域上传 ")]),t("p",{staticClass:"ant-upload-hint"},[e._v(" 仅支持单个文件，且文件名必须为Release.zip ")])]),t("a-row",{staticStyle:{"margin-top":"20px"},attrs:{type:"flex",justify:"end"}},[t("a-col",{attrs:{span:2}}),t("a-col",{attrs:{span:2}}),t("a-col",{attrs:{span:6}},[t("span",[e._v("平台：")]),t("a-radio-group",{staticStyle:{float:"right"},attrs:{value:e.os},on:{change:e.osChange}},[t("a-radio",{attrs:{value:"iOS"}},[e._v(" iOS ")]),t("a-radio",{attrs:{value:"Android"}},[e._v(" Android ")])],1)],1),t("a-col",{attrs:{span:4}},[t("a-button",{staticStyle:{float:"right","margin-top":"-5px"},attrs:{icon:"upload",type:"primary",disabled:e.uploadVersionFileBtn,loading:e.loading},on:{click:e.uploadFile}},[e._v("上传 ")])],1)],1)],1)],1)],1),t("a-modal",{attrs:{title:"修改版本信息",visible:e.visible,width:"50%"},on:{cancel:function(a){e.visible=!1}}},[t("template",{slot:"footer"},[t("a-button",{key:"back",on:{click:function(a){e.visible=!1}}},[e._v(" 取消 ")]),t("a-button",{key:"submit",attrs:{type:"primary",loading:e.loading},on:{click:e.save}},[e._v(" 保存 ")])],1),t("a-form-model",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[t("a-form-model-item",{attrs:{label:"版本号",prop:"version","has-feedback":!0}},[t("a-input",{model:{value:e.form.version,callback:function(a){e.$set(e.form,"version",a)},expression:"form.version"}})],1),t("a-form-model-item",{attrs:{label:"网关",prop:"gateway","has-feedback":!0}},[t("a-input",{model:{value:e.form.gateway,callback:function(a){e.$set(e.form,"gateway",a)},expression:"form.gateway"}})],1),t("a-form-model-item",{attrs:{label:"热更文件地址",prop:"cdn","has-feedback":!0}},[t("a-input",{model:{value:e.form.cdn,callback:function(a){e.$set(e.form,"cdn",a)},expression:"form.cdn"}})],1),t("a-form-model-item",{attrs:{label:"公告地址",prop:"announcement","has-feedback":!0}},[t("a-input",{model:{value:e.form.announcement,callback:function(a){e.$set(e.form,"announcement",a)},expression:"form.announcement"}})],1),t("a-form-model-item",{attrs:{label:"版本文件名",prop:"version_file","has-feedback":!0}},[t("a-input",{attrs:{placeholder:"请输入版本文件名称（带后缀）"},model:{value:e.form.version_file,callback:function(a){e.$set(e.form,"version_file",a)},expression:"form.version_file"}})],1)],1)],2)],1)},r=[],o=(t("96cf"),t("1da1")),i=t("7424"),s=t("b775");function c(){return Object(s["e"])(i["VERSION_INFO"],s["a"].GET)}function l(e){return Object(s["e"])(i["VERSION_SAVE"],s["a"].POST,e)}function u(e){return Object(s["e"])(i["VERSION_UPLOAD"],s["a"].POST,e)}function d(e){return Object(s["e"])(i["VERSION_UPLOAD_ZIP"],s["a"].POST,e)}var m={name:"Version",data:function(){return{labelCol:{span:5},wrapperCol:{span:13},loading:!1,visible:!1,form:{version:void 0,gateway:void 0,cdn:void 0,announcement:void 0,version_file:void 0},os:void 0,tabType:void 0,defaultVersionFileList:[],rules:{version:[{required:!0,message:"请输入客户端版本",trigger:"blur"},{min:1,max:10,message:"长度1~10",trigger:"blur"}],gateway:[{required:!0,message:"请输入网关地址",trigger:"blur"},{min:1,max:100,message:"长度1~100",trigger:"blur"}],cdn:[{required:!0,message:"请输入热更文件地址",trigger:"blur"},{min:1,max:100,message:"长度1~100",trigger:"blur"}],announcement:[{required:!0,message:"请输入公告地址",trigger:"blur"},{min:1,max:100,message:"长度1~100",trigger:"blur"}],version_file:[{required:!0,message:"请输入版本文件名",trigger:"blur"},{min:1,max:100,message:"长度1~100",trigger:"blur"}]}}},created:function(){this.fetch()},mounted:function(){},computed:{uploadVersionFileBtn:function(){return!this.os||!this.file}},methods:{fetch:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var t,n,r,o,i,s,l,u,d,m;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c();case 3:if(t=a.sent,n=t.data,r=n.code,o=n.msg,0===r){a.next=9;break}return e.$message.error(o),a.abrupt("return");case 9:i=n.data||{},s=i.version,l=i.gateway,u=i.cdn,d=i.announcement,m=i.version_file,e.form.version=s,e.form.gateway=l,e.form.cdn=u,e.form.announcement=d,e.form.version_file=m,a.next=20;break;case 17:a.prev=17,a.t0=a["catch"](0),e.$message.error(a.t0.message);case 20:case"end":return a.stop()}}),a,null,[[0,17]])})))()},modify:function(){this.visible=!0},save:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var t,n,r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.loading=!0,a.next=4,l(e.form);case 4:if(t=a.sent,n=t.data,r=n.code,o=n.msg,0===r){a.next=11;break}return e.$message.error(o),e.loading=!1,a.abrupt("return");case 11:return e.$message.success("保存成功"),e.visible=!1,a.next=15,e.fetch();case 15:e.loading=!1,a.next=22;break;case 18:a.prev=18,a.t0=a["catch"](0),e.loading=!1,e.$message.error(a.t0.message);case 22:case"end":return a.stop()}}),a,null,[[0,18]])})))()},beforeUpload:function(e){return this.file=e,this.defaultVersionFileList=[e],!1},uploadFile:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var t,n,r,o,i,s,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,t=e.file,n=new FormData,n.append("file",t),n.append("os",e.os),"version"!==e.tabType){a.next=9;break}r=u,a.next=15;break;case 9:if("hot_update"!==e.tabType){a.next=13;break}r=d,a.next=15;break;case 13:return e.$message.error("平台有误"),a.abrupt("return");case 15:return e.loading=!0,a.next=18,r(n);case 18:if(o=a.sent,i=o.data,s=i.code,c=i.msg,0===s){a.next=25;break}return e.loading=!1,e.$message.error(c),a.abrupt("return");case 25:e.$success({title:"提示",content:"上传成功"}),e.loading=!1,a.next=33;break;case 29:a.prev=29,a.t0=a["catch"](0),e.loading=!1,e.$message.error(a.t0.message);case 33:case"end":return a.stop()}}),a,null,[[0,29]])})))()},osChange:function(e){this.os=e.target.value},tabChange:function(e){this.tabType=e,this.os=void 0}}},p=m,f=(t("c9af"),t("0c7c")),v=Object(f["a"])(p,n,r,!1,null,"413ec56c",null);a["default"]=v.exports},c9af:function(e,a,t){"use strict";var n=t("fd97"),r=t.n(n);r.a},fd97:function(e,a,t){}}]);