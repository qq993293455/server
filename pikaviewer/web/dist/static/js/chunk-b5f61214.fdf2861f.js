(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b5f61214"],{"01c3":function(t,e,a){"use strict";var n=a("6ce6"),r=a.n(n);r.a},"2c803":function(t,e,a){},"4ffd":function(t,e,a){t.exports=a.p+"static/img/logo.9ebb0df3.png"},5476:function(t,e,a){},"613e":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footer"},[a("div",{staticClass:"links"},t._l(t.linkList,(function(e,n){return a("a",{key:n,attrs:{target:"_blank",href:e.link?e.link:"javascript: void(0)"}},[e.icon?a("a-icon",{attrs:{type:e.icon}}):t._e(),t._v(t._s(e.name)+" ")],1)})),0),a("div",{staticClass:"copyright"},[t._v(" Copyright"),a("a-icon",{attrs:{type:"copyright"}}),t._v(t._s(t.copyright)+" ")],1)])},r=[],o={name:"PageFooter",props:["copyright","linkList"]},c=o,s=(a("01c3"),a("0c7c")),i=Object(s["a"])(c,n,r,!1,null,"7b4663f1",null);e["a"]=i.exports},"6ce6":function(t,e,a){},"6d14":function(t,e,a){"use strict";var n=a("5476"),r=a.n(n);r.a},7424:function(t,e){var a="v1",n="http://127.0.0.1:8888";t.exports={SYSTEM_NAME:"".concat(a,"/name"),LOGIN:"".concat(a,"/admin/user/login"),ROUTES:"".concat(a,"/routes"),NODES_MODULE:"".concat(a,"/node/module"),NODES_PIKA:"".concat(a,"/node/pika"),QUERY_DATA:"".concat(a,"/query/data"),All_API:"".concat(n,"/all"),HISTORY:"".concat(n,"/history"),REQUEST_API:"".concat(n,"/"),PID:"".concat(a,"/restart/pid"),RESTART:"".concat(a,"/restart/do"),LOG:"".concat(a,"/restart/log"),SYNC_MAP:"".concat(a,"/restart/sync/map"),PLAYER_INFO:"".concat(a,"/admin/player/info"),MAIL_INFO:"".concat(a,"/admin/player/mail/info"),MAIL_SEND:"".concat(a,"/admin/player/mail/send"),MAIL_DEL:"".concat(a,"/admin/player/mail/delete"),MAIL_ENTIRE:"".concat(a,"/admin/player/mail/entire"),PLAYER_KICK_OFF:"".concat(a,"/admin/player/kick/off"),ANNOUNCEMENT_INFO:"".concat(a,"/announcement"),ANNOUNCEMENT_LIST:"".concat(a,"/announcement/list"),ANNOUNCEMENT_SAVE:"".concat(a,"/announcement/save"),ANNOUNCEMENT_DEL:"".concat(a,"/announcement/del"),BATTLE_LOG_FILES:"".concat(a,"/battle/log/files"),BATTLE_LOG_DEL:"".concat(a,"/battle/log/del"),BATTLE_LOG_DOWNLOAD:"".concat(a,"/battle/log/download"),BUILD_DO:"".concat(a,"/build/do"),BUILD_LOG:"".concat(a,"/build/log"),VERSION_INFO:"".concat(a,"/version/info"),VERSION_SAVE:"".concat(a,"/version/save"),VERSION_UPLOAD:"".concat(a,"/version/file"),VERSION_UPLOAD_ZIP:"".concat(a,"/version/zip"),BROADCAST_SEND:"".concat(a,"/broadcast/send"),WL_LIST:"".concat(a,"/whitelist/list"),WL_SAVE:"".concat(a,"/whitelist/save"),WL_DEL:"".concat(a,"/whitelist/del"),GITLAB_MEMBERS:"".concat(a,"/gitlab/members"),GITLAB_MODIFY:"".concat(a,"/gitlab/modify"),CDKEY_SAVE:"".concat(a,"/cdkey/save"),CDKEY_DEACTIVE:"".concat(a,"/cdkey/deactive"),BWL_LIST:"".concat(a,"/beta/whitelist/list"),BWL_SAVE:"".concat(a,"/beta/whitelist/save"),BWL_DEL:"".concat(a,"/beta/whitelist/del"),MAP_LINE_INFO:"".concat(a,"/map/line/info")}},"74bb":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a("96cf");var n=a("1da1"),r=a("7424"),o=a("b775");function c(){return Object(o["e"])(r["SYSTEM_NAME"],o["a"].GET)}function s(){return i.apply(this,arguments)}function i(){return i=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c();case 3:if(e=t.sent,a=e.data,n=a.code,a.msg,0===n){t.next=8;break}return t.abrupt("return","");case 8:return t.abrupt("return",a.data);case 11:t.prev=11,t.t0=t["catch"](0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])}))),i.apply(this,arguments)}},"80c1":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("common-layout",[n("div",{staticClass:"top"},[n("div",{staticClass:"header"},[n("img",{staticClass:"logo",attrs:{alt:"logo",src:a("4ffd")}}),n("span",{staticClass:"title"},[t._v(t._s(t.systemName))])])]),n("div",{staticClass:"login"},[n("a-form",{attrs:{form:t.form},on:{submit:t.onSubmit}},[n("a-tabs",{staticStyle:{padding:"0 2px"},attrs:{size:"large",tabBarStyle:{textAlign:"center"}}},[n("a-tab-pane",{key:"1",attrs:{tab:"账户密码登录"}},[n("a-alert",{directives:[{name:"show",rawName:"v-show",value:t.error,expression:"error"}],staticStyle:{"margin-bottom":"24px"},attrs:{type:"error",closable:!0,message:t.error,showIcon:""}}),n("a-form-item",{attrs:{"has-feedback":""}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:"",rules:[{required:!0,message:"请输入账户名",whitespace:!0}]}],expression:"['name', {initialValue:'',rules: [{ required: true, message: '请输入账户名', whitespace: true}]}]"}],attrs:{autocomplete:"autocomplete",size:"large",placeholder:"请输入登录账号"}},[n("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),n("a-form-item",{attrs:{"has-feedback":""}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{initialValue:"",rules:[{required:!0,message:"请输入密码",whitespace:!0}]}],expression:"['password', {initialValue:'', rules: [{ required: true, message: '请输入密码', whitespace: true}]}]"}],attrs:{size:"large",placeholder:"请输入登录密码",autocomplete:"autocomplete",type:"password"}},[n("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1)],1)],1),n("div"),n("a-form-item",[n("a-button",{staticStyle:{width:"100%","margin-top":"24px"},attrs:{loading:t.logging,size:"large",htmlType:"submit",type:"primary"}},[t._v("登录 ")])],1)],1)],1)])},r=[],o=a("5530"),c=(a("96cf"),a("1da1")),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"common-layout"},[a("div",{staticClass:"content"},[t._t("default")],2),a("page-footer",{attrs:{"link-list":t.footerLinks,copyright:t.copyright}})],1)},i=[],u=a("613e"),l=a("5880"),m={name:"CommonLayout",components:{PageFooter:u["a"]},computed:Object(o["a"])({},Object(l["mapState"])("setting",["footerLinks","copyright"]))},p=m,d=(a("6d14"),a("0c7c")),f=Object(d["a"])(p,s,i,!1,null,"1c265f57",null),g=f.exports,b=a("b13a"),h=a("b775"),v=a("89a5"),_=a("74bb"),O={name:"Login",components:{CommonLayout:g},data:function(){return{logging:!1,error:"",form:this.$form.createForm(this)}},computed:{systemName:function(){return this.$store.state.setting.systemName}},mounted:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(_["a"])();case 2:a=e.sent,t.setSystemName(a);case 4:case"end":return e.stop()}}),e)})))()},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(l["mapMutations"])("account",["setUser","setPermissions","setRoles"])),Object(l["mapMutations"])("setting",["setSystemName"])),{},{onSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t){if(!t){e.logging=!0;var a=e.form.getFieldValue("name"),n=e.form.getFieldValue("password");Object(b["b"])(a,n).then(e.afterLogin).catch((function(t){e.logging=!1,e.$message.error("登录失败："+t.message)}))}}))},afterLogin:function(t){var e=this;this.logging=!1;var a=t.data,n=t.data,r=n.code,o=n.msg;if(0!==r)return this.$message.error(o);if(a.code>=0){var c=a.data;c.avatar="https://gw.alipayobjects.com/zos/rmsportal/BiazfanxmamNRoxxVxka.png",this.setUser(c),Object(h["f"])({token:a.data.token,expireAt:new Date(a.data.expireAt)}),Object(b["a"])().then((function(t){var a=t.data,n=a.code,r=a.msg,o=a.data;if(0!==n)return e.$message.error(r);Object(v["d"])(o),2===c.role?e.$router.push("/mail/query"):e.$router.push("/restart"),e.$message.success("登录成功",3)}))}else this.error=a.msg}})},E=O,y=(a("c8cf"),Object(d["a"])(E,n,r,!1,null,"de7cd48e",null)),L=y.exports;e["default"]=L},b13a:function(t,e,a){"use strict";a.d(e,"b",(function(){return c})),a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return l}));a("96cf");var n=a("1da1"),r=a("7424"),o=a("b775");function c(t,e){return s.apply(this,arguments)}function s(){return s=Object(n["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o["e"])(r["LOGIN"],o["a"].POST,{username:e,password:a}));case 1:case"end":return t.stop()}}),t)}))),s.apply(this,arguments)}function i(){return u.apply(this,arguments)}function u(){return u=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o["e"])(r["ROUTES"],o["a"].GET));case 1:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function l(){localStorage.removeItem("admin.routes"),localStorage.removeItem("admin.permissions"),localStorage.removeItem("admin.roles"),Object(o["d"])()}},c8cf:function(t,e,a){"use strict";var n=a("2c803"),r=a.n(n);r.a}}]);