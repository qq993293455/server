(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02ff52d4"],{"650e":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",[n("a-button",{attrs:{icon:"plus",type:"primary"},on:{click:e.newWhiteList}},[e._v("新增白名单")]),n("br"),n("br"),n("a-table",{attrs:{columns:e.columns,"data-source":e.list,pagination:!1,size:"small"},scopedSlots:e._u([{key:"enable",fn:function(t,a){return n("span",{},[n("a-switch",{attrs:{checked:a.enable},on:{change:function(t){return e.enableChange(a)}}},[n("a-icon",{attrs:{slot:"checkedChildren",type:"check"},slot:"checkedChildren"}),n("a-icon",{attrs:{slot:"unCheckedChildren",type:"close"},slot:"unCheckedChildren"})],1)],1)}},{key:"action",fn:function(t){return n("span",{},[n("a-space",[n("a-tooltip",{attrs:{placement:"right"}},[n("template",{slot:"title"},[n("span",[e._v("删除")])]),n("a-button",{attrs:{icon:"delete",shape:"circle",type:"danger",size:"small"},on:{click:function(n){return e.deleteWhiteList(t.device)}}})],2)],1)],1)}}])}),n("a-modal",{attrs:{width:"50%",title:"新增设备白名单",maskClosable:!1,"dialog-style":{top:"200px"},"confirm-loading":e.loading,"ok-text":"保存","cancel-text":"取消"},on:{ok:e.save,cancel:e.cancel},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("a-form-model",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[n("a-form-model-item",{attrs:{label:"设备号",prop:"device","has-feedback":!0}},[n("a-input",{attrs:{placeholder:"请输入设备号"},model:{value:e.form.device,callback:function(t){e.$set(e.form,"device",t)},expression:"form.device"}})],1),n("a-form-model-item",{attrs:{label:"是否启用"}},[n("a-switch",{attrs:{checked:e.enable},on:{change:e.switchChange}},[n("a-icon",{attrs:{slot:"checkedChildren",type:"check"},slot:"checkedChildren"}),n("a-icon",{attrs:{slot:"unCheckedChildren",type:"close"},slot:"unCheckedChildren"})],1)],1),n("a-form-model-item",{attrs:{label:"备注",prop:"comment","has-feedback":!0}},[n("a-input",{attrs:{placeholder:"请输入备注"},model:{value:e.form.comment,callback:function(t){e.$set(e.form,"comment",t)},expression:"form.comment"}})],1)],1)],1)],1)},c=[],r=(n("4160"),n("159b"),n("96cf"),n("1da1")),o=n("7424"),s=n("b775");function i(){return Object(s["e"])(o["BWL_LIST"],s["a"].GET)}function l(e){return Object(s["e"])(o["BWL_SAVE"],s["a"].POST,e)}function u(e){return Object(s["e"])(o["BWL_DEL"],s["a"].POST,{device:e})}var d=[{title:"设备号",dataIndex:"device"},{title:"是否启用",dataIndex:"enable",scopedSlots:{customRender:"enable"}},{title:"备注",dataIndex:"comment"},{title:"更新时间",dataIndex:"updated_at",width:150},{title:"操作",width:60,scopedSlots:{customRender:"action"}}],m={device:void 0,enable:!0,comment:void 0},f={name:"Announcement",components:{},data:function(){return{labelCol:{span:4},wrapperCol:{span:14},columns:d,list:[],visible:!1,loading:!1,enable:!0,form:{device:void 0,enable:!0,comment:void 0},rules:{device:[{required:!0,message:"请输入设备号",trigger:"blur"},{min:1,max:64,message:"长度为1 ~ 64",trigger:"blur"}],comment:[{required:!0,message:"请输入备注",trigger:"blur"},{min:1,max:32,message:"长度为1 ~ 32",trigger:"blur"}]}}},created:function(){this.fetch()},methods:{subContent:function(e){var t=10;return e.length>t&&(e=e.substr(0,t)+"..."),e},newWhiteList:function(){this.visible=!0,this.type=void 0,this.form=Object.assign({},m),this.enable=this.form.enable},typeChange:function(e){this.type=e,this.form.type=e},fetch:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,a,c,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i();case 3:if(n=t.sent,a=n.data,c=a.code,r=a.msg,0===c){t.next=9;break}return e.$message.error(r),t.abrupt("return");case 9:o=a.data||[],o.sort((function(e,t){return t.updated_at-e.updated_at})),o.forEach((function(t){t.key=t.device,t.updated_at=e.$convertTime(new Date(1e3*t.updated_at),"YYYY-MM-DD HH:mm:ss")})),e.list=o,t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](0),e.$message.error(t.t0.message);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))()},deleteWhiteList:function(e){var t=this;this.$confirm({title:"确定删除？",content:"删除后无法恢复，确定删除该设备吗？",onOk:function(){t.doDel(e)},onCancel:function(){}})},save:function(){var e=this,t=this;this.$refs.form.validate(function(){var n=Object(r["a"])(regeneratorRuntime.mark((function n(a){var c,r,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!a){n.next=25;break}return n.prev=1,t.loading=!0,n.next=5,l(e.form);case 5:if(c=n.sent,r=c.data,o=r.code,s=r.msg,0===o){n.next=12;break}return t.$message.error(s),t.loading=!1,n.abrupt("return");case 12:return t.visible=!1,t.loading=!1,n.next=16,e.fetch();case 16:t.$message.success("保存成功"),n.next=23;break;case 19:n.prev=19,n.t0=n["catch"](1),t.loading=!1,t.$message.error(n.t0.message);case 23:n.next=26;break;case 25:return n.abrupt("return",!1);case 26:case"end":return n.stop()}}),n,null,[[1,19]])})));return function(e){return n.apply(this,arguments)}}())},doDel:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,c,r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,u(e);case 3:if(a=n.sent,c=a.data,r=c.code,o=c.msg,0===r){n.next=9;break}return t.$message.error(o),n.abrupt("return");case 9:return n.next=11,t.fetch();case 11:return t.$message.success("删除成功"),n.next=14,t.fetch();case 14:n.next=19;break;case 16:n.prev=16,n.t0=n["catch"](0),t.$message.error(n.t0.message);case 19:case"end":return n.stop()}}),n,null,[[0,16]])})))()},cancel:function(){this.$refs.form.resetFields(),this.form=Object.assign({},m),this.visible=!1},switchChange:function(e){this.enable=e,this.form.enable=e},enableChange:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,c,r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.enable=!e.enable,n.next=3,l(e);case 3:if(a=n.sent,c=a.data,r=c.code,o=c.msg,0===r){n.next=9;break}return t.$message.error(o),n.abrupt("return");case 9:t.$message.success("修改成功");case 10:case"end":return n.stop()}}),n)})))()}}},h=f,p=n("0c7c"),b=Object(p["a"])(h,a,c,!1,null,"d30f8f24",null);t["default"]=b.exports},7424:function(e,t){var n="v1",a="http://127.0.0.1:8888";e.exports={SYSTEM_NAME:"".concat(n,"/name"),LOGIN:"".concat(n,"/admin/user/login"),ROUTES:"".concat(n,"/routes"),NODES_MODULE:"".concat(n,"/node/module"),NODES_PIKA:"".concat(n,"/node/pika"),QUERY_DATA:"".concat(n,"/query/data"),All_API:"".concat(a,"/all"),HISTORY:"".concat(a,"/history"),REQUEST_API:"".concat(a,"/"),PID:"".concat(n,"/restart/pid"),RESTART:"".concat(n,"/restart/do"),LOG:"".concat(n,"/restart/log"),SYNC_MAP:"".concat(n,"/restart/sync/map"),PLAYER_INFO:"".concat(n,"/admin/player/info"),MAIL_INFO:"".concat(n,"/admin/player/mail/info"),MAIL_SEND:"".concat(n,"/admin/player/mail/send"),MAIL_DEL:"".concat(n,"/admin/player/mail/delete"),MAIL_ENTIRE:"".concat(n,"/admin/player/mail/entire"),PLAYER_KICK_OFF:"".concat(n,"/admin/player/kick/off"),ANNOUNCEMENT_INFO:"".concat(n,"/announcement"),ANNOUNCEMENT_LIST:"".concat(n,"/announcement/list"),ANNOUNCEMENT_SAVE:"".concat(n,"/announcement/save"),ANNOUNCEMENT_DEL:"".concat(n,"/announcement/del"),BATTLE_LOG_FILES:"".concat(n,"/battle/log/files"),BATTLE_LOG_DEL:"".concat(n,"/battle/log/del"),BATTLE_LOG_DOWNLOAD:"".concat(n,"/battle/log/download"),BUILD_DO:"".concat(n,"/build/do"),BUILD_LOG:"".concat(n,"/build/log"),VERSION_INFO:"".concat(n,"/version/info"),VERSION_SAVE:"".concat(n,"/version/save"),VERSION_UPLOAD:"".concat(n,"/version/file"),VERSION_UPLOAD_ZIP:"".concat(n,"/version/zip"),BROADCAST_SEND:"".concat(n,"/broadcast/send"),WL_LIST:"".concat(n,"/whitelist/list"),WL_SAVE:"".concat(n,"/whitelist/save"),WL_DEL:"".concat(n,"/whitelist/del"),GITLAB_MEMBERS:"".concat(n,"/gitlab/members"),GITLAB_MODIFY:"".concat(n,"/gitlab/modify"),CDKEY_SAVE:"".concat(n,"/cdkey/save"),CDKEY_DEACTIVE:"".concat(n,"/cdkey/deactive"),BWL_LIST:"".concat(n,"/beta/whitelist/list"),BWL_SAVE:"".concat(n,"/beta/whitelist/save"),BWL_DEL:"".concat(n,"/beta/whitelist/del"),MAP_LINE_INFO:"".concat(n,"/map/line/info")}}}]);