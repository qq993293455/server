(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5886aa06"],{"1ca8":function(e,t,n){},"1fd7":function(e,t,n){"use strict";n("877b")},"7fb0":function(e,t,n){},"877b":function(e,t,n){},"979f":function(e,t,n){"use strict";n("1ca8")},a458:function(e,t,n){"use strict";n("7fb0")},a888:function(e,t,n){"use strict";n("caad"),n("2532"),n("ac1f"),n("5319"),n("99af");var r={bind:function(e,t,n){var r=e.querySelector(".el-dialog__header"),o=e.querySelector(".el-dialog");r.style.cssText+=";cursor:move;",o.style.cssText+=";top:0px;";var s=function(){return window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]}}();r.onmousedown=function(e){var t=e.clientX-r.offsetLeft,i=e.clientY-r.offsetTop,a=o.offsetWidth,l=o.offsetHeight,c=document.body.clientWidth,u=document.body.clientHeight,d=o.offsetLeft,f=c-o.offsetLeft-a,h=o.offsetTop,v=u-o.offsetTop-l,g=s(o,"left"),p=s(o,"top");g.includes("%")?(g=+document.body.clientWidth*(+g.replace(/\%/g,"")/100),p=+document.body.clientHeight*(+p.replace(/\%/g,"")/100)):(g=+g.replace(/\px/g,""),p=+p.replace(/\px/g,"")),document.onmousemove=function(e){var r=e.clientX-t,s=e.clientY-i;-r>d?r=-d:r>f&&(r=f),-s>h?s=-h:s>v&&(s=v),o.style.cssText+=";left:".concat(r+g,"px;top:").concat(s+p,"px;"),n.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},o=function(e){e.directive("el-drag-dialog",r)};window.Vue&&(window["el-drag-dialog"]=r,Vue.use(o)),r.install=o;t["a"]=r},b775:function(e,t,n){"use strict";var r=n("bc3a"),o=n.n(r),s=o.a.create({baseURL:"http://localhost:8080",timeout:5e3});t["a"]=s},c4af:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("proto-detail",{attrs:{"is-edit":!1}})},o=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"components-container"},[n("div",{staticClass:"selector"},[e._v(" 服务器: "),n("el-select",{ref:"select",attrs:{placeholder:"请选择服务器"},model:{value:e.serverValue,callback:function(t){e.serverValue=t},expression:"serverValue"}},e._l(e.servers,(function(e){return n("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1),n("el-button",{attrs:{icon:"el-icon-edit",type:"warning"},on:{click:function(t){return e.getValue(e.serverValue)}}},[e._v(" edit ")]),n("el-button",{attrs:{icon:"el-icon-circle-plus",type:"primary"},on:{click:function(t){e.dialogServerVisible=!0}}},[e._v(" 添加server ")])],1),n("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{visible:e.dialogEditVisible,title:"Shipping address"},on:{"update:visible":function(t){e.dialogEditVisible=t},dragDialog:e.handleDrag}},[n("div",{staticClass:"components-container"},[n("aside",[e._v("Json-Editor is base on "),n("a",{attrs:{href:"https://github.com/codemirror/CodeMirror",target:"_blank"}},[e._v("CodeMirrorr")]),e._v(". Lint base on "),n("a",{attrs:{href:"https://github.com/codemirror/CodeMirror/blob/master/addon/lint/json-lint.js",target:"_blank"}},[e._v("json-lint")]),e._v(".")]),n("div",{staticClass:"editor-container"},[n("json-editor",{ref:"jsonEditor",model:{value:e.server,callback:function(t){e.server=t},expression:"server"}}),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveServer()}}},[e._v(" save ")]),n("el-button",{attrs:{plain:"",icon:"el-icon-delete",type:"danger"},on:{click:function(t){return e.delServer()}}},[e._v(" delete ")])],1)])]),n("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{visible:e.dialogServerVisible,title:"Shipping address"},on:{"update:visible":function(t){e.dialogServerVisible=t},dragDialog:e.handleDrag}},[n("div",{staticClass:"components-container"},[n("aside",[e._v("Json-Editor is base on "),n("a",{attrs:{href:"https://github.com/codemirror/CodeMirror",target:"_blank"}},[e._v("CodeMirrorr")]),e._v(". Lint base on "),n("a",{attrs:{href:"https://github.com/codemirror/CodeMirror/blob/master/addon/lint/json-lint.js",target:"_blank"}},[e._v("json-lint")]),e._v(".")]),n("div",{staticClass:"editor-container"},[n("json-editor",{ref:"jsonEditor",model:{value:e.server2,callback:function(t){e.server2=t},expression:"server2"}}),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveServer2()}}},[e._v(" save ")])],1)])]),n("div",{staticClass:"selector"},[e._v(" 用户: "),n("el-select",{ref:"select",attrs:{placeholder:"请选择用户",filterable:"",clearable:""},on:{blur:e.selectBlur},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}},e._l(e.users,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1),n("el-button",{attrs:{type:"primary",icon:"el-icon-caret-right"},on:{click:e.loginRequest}},[e._v(" 登录 ")]),n("el-button",{attrs:{type:"warning",icon:"el-icon-caret-right"},on:{click:e.logoutRequest}},[e._v(" 注销 ")]),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.delUser}},[e._v(" 删除 ")])],1),n("div",{staticClass:"selector"},[e._v(" proto: "),n("el-select",{ref:"select",attrs:{filterable:"",placeholder:"请选择proto"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.list,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1),n("el-button",{attrs:{icon:"el-icon-edit",type:"warning"},on:{click:function(t){return e.fetchJson(e.value)}}},[e._v(" 编辑json ")])],1),n("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{visible:e.dialogTableVisible,title:"Shipping address"},on:{"update:visible":function(t){e.dialogTableVisible=t},dragDialog:e.handleDrag}},[n("div",{staticClass:"components-container"},[n("aside",[e._v("Json-Editor is base on "),n("a",{attrs:{href:"https://github.com/codemirror/CodeMirror",target:"_blank"}},[e._v("CodeMirrorr")]),e._v(". Lint base on "),n("a",{attrs:{href:"https://github.com/codemirror/CodeMirror/blob/master/addon/lint/json-lint.js",target:"_blank"}},[e._v("json-lint")]),e._v(".")]),n("div",{staticClass:"editor-container"},[n("json-editor",{ref:"jsonEditor",model:{value:e.jsonData,callback:function(t){e.jsonData=t},expression:"jsonData"}}),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveJson()}}},[e._v(" save ")])],1)])]),n("div",{staticClass:"sender"},[n("el-button",{attrs:{round:"",type:"primary",icon:"el-icon-caret-right"},on:{click:e.protoRequest}},[e._v(" 开始请求 ")]),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.clearUp}},[e._v(" 清空数据 ")])],1),n("div",{staticClass:"viewer"},[n("request-viewer",{ref:"requestViewer"})],1)],1)},i=[],a=(n("159b"),n("b0c0"),n("a434"),n("a888")),l=n("fa7e"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"textView"},[n("p",{domProps:{innerHTML:e._s(e.value)}})])},u=[],d=(n("ac1f"),n("5319"),{name:"RequestViewer",data:function(){return{value:"",path:"ws://127.0.0.1:8080/listen?user="}},destroyed:function(){this.socket.onclose=this.close},methods:{startListen:function(e){"undefined"===typeof WebSocket?alert("您的浏览器不支持socket"):(this.socket=new WebSocket(this.path+e),this.socket.onopen=this.open,this.socket.onerror=this.error,this.socket.onmessage=this.getMessage)},clearUp:function(){this.value=""},open:function(){console.log("socket连接成功")},error:function(){console.log("连接错误")},getMessage:function(e){":"===e.data.charAt(e.data.length-1)?this.value=this.value+"<h4>"+e.data+"</h4>":this.value=this.value+"<p>"+this.syntaxHighlight(e.data)+"</p>"},close:function(){console.log("socket已经关闭")},syntaxHighlight:function(e){return"string"!==typeof e&&(e=JSON.stringify(e,void 0,2)),e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,(function(e){var t="number";return/^"/.test(e)?t=/:$/.test(e)?"key":"string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="'+t+'">'+e+"</span>"}))}}}),f=d,h=(n("a458"),n("2877")),v=Object(h["a"])(f,c,u,!1,null,"3a0c656b",null),g=v.exports,p=n("b775");function b(){return Object(p["a"])({url:"/request/names",method:"get"})}function m(e){return Object(p["a"])({url:"/request/data",method:"get",params:{name:e}})}function _(e){return Object(p["a"])({url:"/request/save",method:"post",data:e})}function y(){return Object(p["a"])({url:"/server/data",method:"get"})}function j(e){return Object(p["a"])({url:"/server/save",method:"post",data:e})}function V(e){return Object(p["a"])({url:"/server/del",method:"post",name:e,transformRequest:[function(){var t="";return t+=encodeURIComponent("name")+"="+encodeURIComponent(e)+"&",t=t.substring(0,t.lastIndexOf("&")),t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function k(){return Object(p["a"])({url:"/user/data",method:"get"})}function w(e){return Object(p["a"])({url:"/user/save",method:"post",user:e,transformRequest:[function(){var t="";return t+=encodeURIComponent("user")+"="+encodeURIComponent(e)+"&",t=t.substring(0,t.lastIndexOf("&")),t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function C(e){return Object(p["a"])({url:"/user/del",method:"post",user:e,transformRequest:[function(){var t="";return t+=encodeURIComponent("user")+"="+encodeURIComponent(e)+"&",t=t.substring(0,t.lastIndexOf("&")),t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function q(e){return Object(p["a"])({url:"/login",method:"post",data:e})}function x(e){return Object(p["a"])({url:"/request",method:"post",data:e})}function S(e){return Object(p["a"])({url:"/logout",method:"post",data:e})}var E={name:"ProtoDetail",directives:{elDragDialog:a["a"]},components:{JsonEditor:l["a"],RequestViewer:g},data:function(){return{dialogTableVisible:!1,dialogServerVisible:!1,dialogEditVisible:!1,jsonData:"",value:"",list:null,proto:{key:"",value:""},server:{name:"",gateAddr:"",server_id:0,stateless_id:0,battle_id:0},server2:{name:"",gateAddr:"",server_id:0,stateless_id:0,battle_id:0},serverValue:"",servers:[],users:[],user:"",req:{server:"",user:"",proto:""},push:!0}},created:function(){this.fetchData(),this.fetchServer(),this.fetchUser()},methods:{handleDrag:function(){this.$refs.select.blur()},selectBlur:function(e){""!==e.target.value&&-1===this.users.indexOf(e.target.value)&&(this.users.push(e.target.value),this.user=e.target.value,w(this.user).then((function(e){})).catch((function(e){console.log(e)})))},getValue:function(e){var t=this;this.servers.forEach((function(n){n.name===e&&(t.server=n,t.dialogEditVisible=!0)}))},fetchData:function(){var e=this;b().then((function(t){e.list=t.data["requests"]})).catch((function(e){console.log(e)}))},fetchJson:function(e){var t=this;this.dialogTableVisible=!0,m(e).then((function(e){t.jsonData=e.data})).catch((function(e){console.log(e)}))},saveJson:function(){this.proto.key=this.value,this.proto.value=this.jsonData,_(this.proto).then((function(e){})).catch((function(e){console.log(e)})),this.dialogTableVisible=!1},fetchServer:function(){var e=this;y().then((function(t){e.servers=t.data})).catch((function(e){console.log(e)}))},saveServer:function(){j(this.server).then((function(e){})).catch((function(e){console.log(e)})),this.dialogServerVisible=!1,this.dialogEditVisible=!1,this.fetchServer()},saveServer2:function(){j(this.server2).then((function(e){})).catch((function(e){console.log(e)})),this.dialogServerVisible=!1,this.dialogEditVisible=!1,this.fetchServer()},delServer:function(){V(this.serverValue).then((function(e){})).catch((function(e){console.log(e)})),this.dialogEditVisible=!1,this.fetchServer()},fetchUser:function(){var e=this;k().then((function(t){e.users=t.data})).catch((function(e){console.log(e)}))},delUser:function(){var e=this;C(this.user).then((function(t){for(var n=0;n<e.users.length;n++)if(e.users[n]===e.user)break;e.users.splice(n,1),e.user=""})).catch((function(e){console.log(e)}))},loginRequest:function(){var e=this;""!==this.serverValue&&""!==this.user&&(this.req.server=this.serverValue,this.req.user=this.user,q(this.req).then((function(){e.$refs.requestViewer.startListen(e.req.user)})).catch((function(e){console.log(e)})))},logoutRequest:function(){""!==this.serverValue&&""!==this.user&&(this.req.user=this.user,S(this.req).then((function(){})).catch((function(e){console.log(e)})))},protoRequest:function(){""!==this.serverValue&&""!==this.user&&""!==this.value&&(this.req.server=this.serverValue,this.req.user=this.user,this.req.proto=this.value,x(this.req).then((function(e){})).catch((function(e){console.log(e)})))},clearUp:function(){this.$refs.requestViewer.clearUp()}}},O=E,D=(n("979f"),Object(h["a"])(O,s,i,!1,null,"45b5ea06",null)),R=D.exports,T={name:"ChooseProto",components:{ProtoDetail:R}},U=T,J=Object(h["a"])(U,r,o,!1,null,null,null);t["default"]=J.exports},fa7e:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"json-editor"},[n("textarea",{ref:"textarea"})])},o=[],s=n("56b3"),i=n.n(s);n("0dd0"),n("a7be"),n("acdf"),n("f9d4"),n("8822"),n("d2de");n("ae67");var a={name:"JsonEditor",props:["value"],data:function(){return{jsonEditor:!1}},watch:{value:function(e){var t=this.jsonEditor.getValue();e!==t&&this.jsonEditor.setValue(JSON.stringify(this.value,null,2))}},mounted:function(){var e=this;this.jsonEditor=i.a.fromTextArea(this.$refs.textarea,{lineNumbers:!0,mode:"application/json",gutters:["CodeMirror-lint-markers"],theme:"rubyblue",lint:!0}),this.jsonEditor.setValue(JSON.stringify(this.value,null,2)),this.jsonEditor.on("change",(function(t){e.$emit("changed",t.getValue()),e.$emit("input",t.getValue())}))},methods:{getValue:function(){return this.jsonEditor.getValue()}}},l=a,c=(n("1fd7"),n("2877")),u=Object(c["a"])(l,r,o,!1,null,"1958ddac",null);t["a"]=u.exports}}]);